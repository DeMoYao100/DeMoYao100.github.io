
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
        <title>交叉编译以及其他架构逆向初探 | Moyao の小屋</title>
        <meta name="author" content="Moyao">
        <meta name="description" content="Write down something interesting I met
feel free to mail me if you have something wanted to talk about
mail: &lt;moyaoxue@outlook.com&gt;
">
        <meta name="keywords" content="">
        <link rel="icon" href="/images/head.jpg">
        <script src="https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js" type="module"></script>
        <script src="https://cdn.staticfile.org/font-awesome/6.1.1/js/all.min.js"></script>
        
        <link rel="stylesheet" href="/css/fonts.min.css">
        <link rel="stylesheet" href="/css/particlex.css">
        
        <script src="https://cdn.staticfile.org/vue/3.2.33/vue.global.prod.min.js"></script>
    <meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div id="loading" style="height:100vh;width:100vw;position:fixed;display:flex;z-index:200;justify-content:space-between;background:#fff;transition:opacity 0.3s ease-out"><div style="position:fixed;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center"><div id="loadcontent" style="width:50vmin;height:50vmin;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px #a3ddfb;text-align:center"><div><h2>LOADING...</h2><p style="word-break:keep-all">加载过慢请开启缓存(浏览器默认开启)</p><div><img alt="loading" src="/loading.gif"></div></div></div></div></div>
        <div id="layout">
            <i data-fa-symbol="calendar-solid" class="fa-solid fa-calendar fa-fw"></i>
            <i data-fa-symbol="bookmark-solid" class="fa-solid fa-bookmark fa-fw"></i>
            <i data-fa-symbol="tags-solid" class="fa-solid fa-tags fa-fw"></i>
            <transition name="into">
                <div v-show="show_page" style="display: -not-none">
                    <div id="menu_show">
                         
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Moyao の小屋</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;home</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;about</span>
        </a>
        
        <a target="_blank" rel="noopener" href="//tags/re/">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;tags</span>
        </a>
        
    </div>
    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div class="curtain" @click="menu_show = !menu_show" v-show="menu_show"></div>
        <div :class="'title'" @click="menu_show = !menu_show">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;Moyao の小屋</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="menu_show">
            
            <a href="">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">home</div>
                </div>
            </a>
            
            <a href="">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">about</div>
                </div>
            </a>
            
            <a href="/tags/re/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">tags</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>
                    </div>
                    <div id="main">
                        
<div class="article">
    <div>
        <h1>交叉编译以及其他架构逆向初探 </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#calendar-solid"></use></svg>
            </span>
            2023/8/26
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <svg class="fa-icon"><use xlink:href="#tags-solid"></use></svg>
            </span>
            
            <span class="tag">
                
                <a href="/tags/re/" style="color: #ff7d73">
                    re
                </a>
            </span>
            
        </span>
        
    </div>
    <div class="content" v-pre>
        <h6 id="preface-蓝帽杯初赛2023，题目没做出来，理论上能出，实际上没时间，就算有时间估计也不会去看那么多汇编，但是既然结合0CTF2021也有一个类似折磨的pwn题（虽然那个题很多种意义上说其实好很多，即使我还是偏re手）不过感觉还是有很多东西要学以及刚学到，浅记录一下。"><a href="#preface-蓝帽杯初赛2023，题目没做出来，理论上能出，实际上没时间，就算有时间估计也不会去看那么多汇编，但是既然结合0CTF2021也有一个类似折磨的pwn题（虽然那个题很多种意义上说其实好很多，即使我还是偏re手）不过感觉还是有很多东西要学以及刚学到，浅记录一下。" class="headerlink" title="preface: 蓝帽杯初赛2023，题目没做出来，理论上能出，实际上没时间，就算有时间估计也不会去看那么多汇编，但是既然结合0CTF2021也有一个类似折磨的pwn题（虽然那个题很多种意义上说其实好很多，即使我还是偏re手）不过感觉还是有很多东西要学以及刚学到，浅记录一下。"></a>preface: 蓝帽杯初赛2023，题目没做出来，理论上能出，实际上没时间，就算有时间估计也不会去看那么多汇编，但是既然结合0CTF2021也有一个类似折磨的pwn题（虽然那个题很多种意义上说其实好很多，即使我还是偏re手）不过感觉还是有很多东西要学以及刚学到，浅记录一下。</h6><span id="more"></span>

<h5 id="一点前置知识：IoT安全研究视角的交叉编译-Clang裁缝店-xuanxuanblingbling-github-io"><a href="#一点前置知识：IoT安全研究视角的交叉编译-Clang裁缝店-xuanxuanblingbling-github-io" class="headerlink" title="一点前置知识：IoT安全研究视角的交叉编译 | Clang裁缝店 (xuanxuanblingbling.github.io)"></a>一点前置知识：<a target="_blank" rel="noopener" href="https://xuanxuanblingbling.github.io/ctf/tools/2021/02/16/cross/">IoT安全研究视角的交叉编译 | Clang裁缝店 (xuanxuanblingbling.github.io)</a></h5><h5 id="这两片可以结合着看看（后面那篇接近我的主要思路，but-failed-QAQ）0CTF-x2F-TCTF-2021-tile-Clang裁缝店-xuanxuanblingbling-github-io-ctf-x2F-2021-07-03-0CTF-TCTF-2021-Quals-x2F-tile-at-master-·-mephi42-x2F-ctf-github-com"><a href="#这两片可以结合着看看（后面那篇接近我的主要思路，but-failed-QAQ）0CTF-x2F-TCTF-2021-tile-Clang裁缝店-xuanxuanblingbling-github-io-ctf-x2F-2021-07-03-0CTF-TCTF-2021-Quals-x2F-tile-at-master-·-mephi42-x2F-ctf-github-com" class="headerlink" title="这两片可以结合着看看（后面那篇接近我的主要思路，but failed. QAQ）0CTF &#x2F; TCTF 2021 tile | Clang裁缝店 (xuanxuanblingbling.github.io)  |  ctf&#x2F;2021.07.03_0CTF_TCTF_2021_Quals&#x2F;tile at master · mephi42&#x2F;ctf (github.com)"></a>这两片可以结合着看看（后面那篇接近我的主要思路，but failed. QAQ）<a target="_blank" rel="noopener" href="https://xuanxuanblingbling.github.io/ctf/pwn/2021/07/05/tile/">0CTF &#x2F; TCTF 2021 tile | Clang裁缝店 (xuanxuanblingbling.github.io)</a>  |  <a target="_blank" rel="noopener" href="https://github.com/mephi42/ctf/tree/master/2021.07.03_0CTF_TCTF_2021_Quals/tile">ctf&#x2F;2021.07.03_0CTF_TCTF_2021_Quals&#x2F;tile at master · mephi42&#x2F;ctf (github.com)</a></h5><h5 id="基本流程：搭建qemu环境尝试gdb调试（发现缺so，尤其稀有架构的so挺麻烦的）"><a href="#基本流程：搭建qemu环境尝试gdb调试（发现缺so，尤其稀有架构的so挺麻烦的）" class="headerlink" title="基本流程：搭建qemu环境尝试gdb调试（发现缺so，尤其稀有架构的so挺麻烦的）"></a>基本流程：搭建qemu环境尝试gdb调试（发现缺so，尤其稀有架构的so挺麻烦的）</h5><h5 id="objdump切换架构硬看汇编，结合ida识别的段猜（比obj-D-的信息稍微清楚一点，不过要记得）"><a href="#objdump切换架构硬看汇编，结合ida识别的段猜（比obj-D-的信息稍微清楚一点，不过要记得）" class="headerlink" title="objdump切换架构硬看汇编，结合ida识别的段猜（比obj -D 的信息稍微清楚一点，不过要记得）"></a>objdump切换架构硬看汇编，结合ida识别的段猜（比obj -D 的信息稍微清楚一点，不过要记得）</h5><h5 id="猜测是challenge1是-amp-0x7f，challenge2异或，challenge3借助map做了什么操作，怀疑是换序然后简单对字符处理…"><a href="#猜测是challenge1是-amp-0x7f，challenge2异或，challenge3借助map做了什么操作，怀疑是换序然后简单对字符处理…" class="headerlink" title="猜测是challenge1是&amp;0x7f，challenge2异或，challenge3借助map做了什么操作，怀疑是换序然后简单对字符处理…"></a>猜测是<code>challenge1</code>是<code>&amp;0x7f</code>，<code>challenge2</code>异或，<code>challenge3</code>借助map做了什么操作，怀疑是换序然后简单对字符处理…</h5><h6 id="还学了这么个小知识点：原生的qemu不支持NX，故shellcode一把梭应该就行"><a href="#还学了这么个小知识点：原生的qemu不支持NX，故shellcode一把梭应该就行" class="headerlink" title="还学了这么个小知识点：原生的qemu不支持NX，故shellcode一把梭应该就行"></a>还学了这么个小知识点：<code>原生的qemu不支持NX，故shellcode一把梭应该就行</code></h6><hr>
<h5 id="本体搭建过程："><a href="#本体搭建过程：" class="headerlink" title="本体搭建过程："></a>本体搭建过程：</h5><h4 id="qemu运行过程（虽然题目中是缺so的，但是确实是这么个流程）"><a href="#qemu运行过程（虽然题目中是缺so的，但是确实是这么个流程）" class="headerlink" title="- qemu运行过程（虽然题目中是缺so的，但是确实是这么个流程）"></a>- qemu运行过程（虽然题目中是缺so的，但是确实是这么个流程）</h4><h5 id="sudo-apt-install-git-libglib2-0-dev-libfdt-dev-libpixman-1-dev-zlib1g-dev"><a href="#sudo-apt-install-git-libglib2-0-dev-libfdt-dev-libpixman-1-dev-zlib1g-dev" class="headerlink" title="sudo apt install git libglib2.0-dev libfdt-dev libpixman-1-dev zlib1g-dev"></a><code>sudo apt install git libglib2.0-dev libfdt-dev libpixman-1-dev zlib1g-dev</code></h5><h5 id="git-clone-https-git-qemu-org-git-qemu-git"><a href="#git-clone-https-git-qemu-org-git-qemu-git" class="headerlink" title="git clone https://git.qemu.org/git/qemu.git"></a><code>git clone https://git.qemu.org/git/qemu.git</code></h5><h5 id="cd-qemu"><a href="#cd-qemu" class="headerlink" title="cd qemu"></a><code>cd qemu</code></h5><h5 id="git-checkout-v5-0-0"><a href="#git-checkout-v5-0-0" class="headerlink" title="git checkout v5.0.0"></a>git checkout v5.0.0</h5><h5 id="configure-target-list-tilegx-linux-user"><a href="#configure-target-list-tilegx-linux-user" class="headerlink" title="./configure --target-list=tilegx-linux-user"></a><code>./configure --target-list=tilegx-linux-user</code></h5><h5 id="make"><a href="#make" class="headerlink" title="make"></a><code>make</code></h5><h5 id="cd-tilegx-linux-user"><a href="#cd-tilegx-linux-user" class="headerlink" title="cd tilegx-linux-user/"></a><code>cd tilegx-linux-user/</code></h5><h5 id="qemu-tilegx-Desktop-newFolder-chall"><a href="#qemu-tilegx-Desktop-newFolder-chall" class="headerlink" title="./qemu-tilegx ./Desktop/newFolder/chall"></a><code>./qemu-tilegx ./Desktop/newFolder/chall</code></h5><h4 id="objdump配置过程："><a href="#objdump配置过程：" class="headerlink" title="- objdump配置过程："></a>- objdump配置过程：</h4><h5 id="wget-https-ftp-gnu-org-gnu-binutils-binutils-2-35-tar-gz"><a href="#wget-https-ftp-gnu-org-gnu-binutils-binutils-2-35-tar-gz" class="headerlink" title="wget https://ftp.gnu.org/gnu/binutils/binutils-2.35.tar.gz"></a><code>wget https://ftp.gnu.org/gnu/binutils/binutils-2.35.tar.gz</code></h5><h5 id="tar-xvf-binutils-2-35-tar-gz"><a href="#tar-xvf-binutils-2-35-tar-gz" class="headerlink" title="tar xvf binutils-2.35.tar.gz"></a><code>tar xvf binutils-2.35.tar.gz</code></h5><h5 id="cd-binutils-2-35"><a href="#cd-binutils-2-35" class="headerlink" title="cd binutils-2.35"></a><code>cd binutils-2.35</code></h5><h5 id="mkdir-build-amp-amp-cd-build"><a href="#mkdir-build-amp-amp-cd-build" class="headerlink" title="mkdir build &amp;&amp; cd build"></a><code>mkdir build &amp;&amp; cd build</code></h5><h5 id="configure-target-tilegx-linux-gnu"><a href="#configure-target-tilegx-linux-gnu" class="headerlink" title="../configure --target=tilegx-linux-gnu"></a><code>../configure --target=tilegx-linux-gnu</code></h5><h5 id="make-1"><a href="#make-1" class="headerlink" title="make"></a><code>make</code></h5><h5 id="tilegx-linux-gnu-objdump-d-Desktop-newFolder-chall-gt-output-asm"><a href="#tilegx-linux-gnu-objdump-d-Desktop-newFolder-chall-gt-output-asm" class="headerlink" title="tilegx-linux-gnu-objdump -d ~/Desktop/newFolder/chall &gt; output.asm"></a><code>tilegx-linux-gnu-objdump -d ~/Desktop/newFolder/chall &gt; output.asm</code></h5><h5 id="即可获得文件的汇编"><a href="#即可获得文件的汇编" class="headerlink" title="即可获得文件的汇编"></a>即可获得文件的汇编</h5>
    </div>
    
</div>
                         
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 20xx - 2024 Moyao の小屋
            <span class="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            @Moyao
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/argvchs/hexo-theme-particlex">ParticleX Theme</a></div>
        
    </div>
</footer>
                    </div>
                </div>
            </transition>
            <div id="img_show">
                <img id="img_content" alt="img_show">
            </div>
        </div>
        <script src="https://cdn.staticfile.org/highlight.js/11.5.1/highlight.min.js"></script>
        <script src="/js/particlex.js"></script>
        <script src="/js/showimg.js"></script>
        

    </body>
</html>