<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Moyao の小屋 • Posts by &#34;ios&#34; tag</title>
        <link>https://demoyao100.github.io</link>
        <description>Write down something interesting I met&lt;br /&gt;
Feel free to mail me if you have something wanted to talk about, plz
mail: &amp;lt;moyaoxue@outlook.com&amp;gt;
</description>
        <language>en</language>
        <pubDate>Wed, 29 May 2024 21:45:21 +0800</pubDate>
        <lastBuildDate>Wed, 29 May 2024 21:45:21 +0800</lastBuildDate>
        <category>re</category>
        <category>Android</category>
        <category>开发</category>
        <category>codeforces</category>
        <category>cv</category>
        <category>驱动</category>
        <category>electron</category>
        <category>docker</category>
        <category>ios</category>
        <category>杂文</category>
        <category>IOT</category>
        <category>jail</category>
        <category>web</category>
        <category>re Android linux</category>
        <category>web shiro</category>
        <category>wasm</category>
        <category>python</category>
        <category>hexo</category>
        <category>tree</category>
        <category>pentesting</category>
        <category>car</category>
        <item>
            <guid isPermalink="true">https://demoyao100.github.io/tweak%E7%BB%95%E8%BF%87%E5%8F%8Dproxy%E6%8A%93%E5%8C%85/</guid>
            <title>tweak绕过反proxy抓包</title>
            <link>https://demoyao100.github.io/tweak%E7%BB%95%E8%BF%87%E5%8F%8Dproxy%E6%8A%93%E5%8C%85/</link>
            <category>re</category>
            <category>ios</category>
            <pubDate>Wed, 29 May 2024 21:45:21 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;PREFACE：入门 ing&lt;/p&gt;
&lt;p&gt;有的程序做了反代理，顺便入门，写插件绕一下～&lt;/p&gt;
&lt;p&gt;555 有跌库库带着学 555&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h3 id=&#34;theos环境搭建&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#theos环境搭建&#34;&gt;#&lt;/a&gt; theos 环境搭建&lt;/h3&gt;
&lt;p&gt;后续环境搭建在这个目录下&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;token constant&#34;&gt;THEOS&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;opt&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;theos&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;git clone &lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;recursive &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;https&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;github&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;com&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;theos&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;theos&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;git&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; $&lt;span class=&#34;token constant&#34;&gt;THEOS&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;安装 ldid，用于签名：&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;brew install ldid&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;安装 dpkg，用于打包&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;brew install dpkg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;启动nic程序&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#启动nic程序&#34;&gt;#&lt;/a&gt; 启动 nic 程序&lt;/h3&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;$&lt;span class=&#34;token constant&#34;&gt;THEOS&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;bin&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;nic&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pl&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;或&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;nic&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pl&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;img src=&#34;/tweak%E7%BB%95%E8%BF%87%E5%8F%8Dproxy%E6%8A%93%E5%8C%85/../../Users/18238/Downloads/1111111.png&#34; alt=&#34;1111111&#34;&gt;&lt;/p&gt;
&lt;p&gt;分别选择：&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;项目名&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;包名&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;author名&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;app的bundle id；&lt;span class=&#34;token template-string&#34;&gt;&lt;span class=&#34;token template-punctuation string&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;com.apple.UIKit&lt;/span&gt;&lt;span class=&#34;token template-punctuation string&#34;&gt;`&lt;/span&gt;&lt;/span&gt; 表示这里会hook所有app&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;安装插件时需要杀死的程序bundle id&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;防抓包原理&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#防抓包原理&#34;&gt;#&lt;/a&gt; 防抓包原理&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.cn/post/7055222090030383112&#34;&gt;https://juejin.cn/post/7055222090030383112&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;![Untitled (1)](…/…/…/Users/18238/Downloads/Untitled (1).png)&lt;/p&gt;
&lt;p&gt;那么反反抓包原理就可以 hook 修改该值的方法，阻止其清空 proxyDictionary 列表的行为&lt;/p&gt;
&lt;p&gt;可以通过这里查询需要的方法名&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://developer.limneos.net/index.php?ios=11.1.2&amp;amp;framework=CFNetwork.framework&amp;amp;header=__NSCFURLSessionConfiguration.h&#34;&gt;https://developer.limneos.net/index.php?ios=11.1.2&amp;amp;framework=CFNetwork.framework&amp;amp;header=__NSCFURLSessionConfiguration.h&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/nst/iOS-Runtime-Headers&#34;&gt;https://github.com/nst/iOS-Runtime-Headers&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;代码编写&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#代码编写&#34;&gt;#&lt;/a&gt; 代码编写&lt;/h3&gt;
&lt;p&gt;logos 语法：&lt;a href=&#34;https://juejin.cn/post/7027356861909172231&#34;&gt;https://juejin.cn/post/7027356861909172231&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tweak.x&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;#&lt;span class=&#34;token keyword&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Foundation&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;Foundation&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;h&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;hook __NSCFURLSessionConfiguration&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;setConnectionProxyDictionary&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;id&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;value&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;@&lt;span class=&#34;token string&#34;&gt;&#34;hook setConnectionProxyDictionary&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  NSDictionary &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;proxyDictionary &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;NSDictionary &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;value&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;proxyDictionary&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;count &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;orig&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;value&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;end&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;hook NSURLSessionConfiguration&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;id&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; defaultSessionConfiguration&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;@&lt;span class=&#34;token string&#34;&gt;&#34;hook defaultSessionConfiguration&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;orig&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;%&lt;/span&gt;end&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;__attribute__&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;constructor&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Xssssss&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;@&lt;span class=&#34;token string&#34;&gt;&#34;hook lalala&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;Makefile&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;TARGET&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; iphone&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;clang&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;latest&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;7.0&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;INSTALL_TARGET_PROCESSES&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; SpringBoard&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;include &lt;span class=&#34;token function&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token constant&#34;&gt;THEOS&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;makefiles&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;common&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;mk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;TWEAK_NAME&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; test&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;test_FILES &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; Tweak&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;x&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;test_CFLAGS &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;fobjc&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;arc&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;include &lt;span class=&#34;token function&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token constant&#34;&gt;THEOS_MAKE_PATH&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;/&lt;/span&gt;tweak&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;mk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;THEOS_DEVICE_IP&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; localhost&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;THEOS_DEVICE_PORT&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2222&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token constant&#34;&gt;ARCHS&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; armv7 arm64&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;参考：&lt;a href=&#34;https://www.jianshu.com/p/a5435650e828&#34;&gt;https://www.jianshu.com/p/a5435650e828&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;防抓包：&lt;a href=&#34;https://juejin.cn/post/7055222090030383112&#34;&gt;https://juejin.cn/post/7055222090030383112&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.cn/post/6964011870554439693&#34;&gt;https://juejin.cn/post/6964011870554439693&lt;/a&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://demoyao100.github.io/%E8%B6%8A%E7%8B%B1%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</guid>
            <title>越狱环境搭建</title>
            <link>https://demoyao100.github.io/%E8%B6%8A%E7%8B%B1%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</link>
            <category>ios</category>
            <pubDate>Wed, 29 May 2024 21:44:59 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;PREFACE：入门 ing&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h3 id=&#34;越狱&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#越狱&#34;&gt;#&lt;/a&gt; 越狱&lt;/h3&gt;
&lt;p&gt;**iOS 越狱使用 checkra1n：**&lt;a href=&#34;https://checkra.in/&#34;&gt;https://checkra.in/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;** 越狱插件：** 越狱后后需要安装 cydia，openssh 和 Frida 的 cydia 插件，环境如下图：（cydia 的源是&lt;a href=&#34;http://apt.cydiami.com/&#34;&gt; apt.cydia.&lt;/a&gt;ren , Frida 的源是&lt;a href=&#34;https://build.frida.re&#34;&gt; https://build.frida.re&lt;/a&gt;）&lt;/p&gt;
&lt;h3 id=&#34;pc工具安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#pc工具安装&#34;&gt;#&lt;/a&gt; pc 工具安装：&lt;/h3&gt;
&lt;p&gt;** 控制 server 端（一般是 mac 电脑）** 需要安装 Frida 环境&lt;/p&gt;
&lt;p&gt;pip3 install frida-tools&lt;/p&gt;
&lt;p&gt;pip3 install frida&lt;/p&gt;
&lt;p&gt;** 需要 usbmuxd，** 用于 usb 登录 ssh 连接和控制 iOS 手机&lt;/p&gt;
&lt;p&gt;通过 brew 来安装 usbmuxd，终端输入以下命令安装 usbmuxd：brew install usbmuxd&lt;/p&gt;
&lt;p&gt;sbmuxd 自带工具 iproxy，iproxy 可以快捷连接 iPhone 操作。由于 Mac 上只支持 4 位的端口号，所以需要把 iPhone 的默认端口 22 映射到 Mac 上，相当于建立一个 Mac 和 iPhone 的通道。终端输入：&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;iproxy &lt;span class=&#34;token number&#34;&gt;2222&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;22&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;以上命令就是把当前连接设备的 22 端口 (SSH 端口) 映射到电脑的 2222 端口，那么想和设备 22 端口通信，直接和本地的 2222 端口通信就可以了。使用 Cmd+T 或 Cmd+N 新建终端，输入:&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ssh &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;p &lt;span class=&#34;token number&#34;&gt;2222&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;root@&lt;span class=&#34;token number&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;mailto&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;root@&lt;span class=&#34;token number&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;# 出现安全问题直接sudo即可&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;**ideviceinstaller，** 用于 usb 控制 iOS 安装 ipa 文件&lt;/p&gt;
&lt;figure class=&#34;highlight jsx&#34;&gt;&lt;figcaption data-lang=&#34;React JSX&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;brew install ideviceinstaller&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ideviceinstaller &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;i apppath 安装apppath下的app&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ideviceinstaller &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;u &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;udid&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;i &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;xxx&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ipa&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt; # xxx&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ipa 为应用在本地的路径&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;**ideviceinstaller，** 用于 usb 控制 iOS 安装 ipa 文件&lt;/p&gt;
&lt;h3 id=&#34;软件安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#软件安装&#34;&gt;#&lt;/a&gt; 软件安装&lt;/h3&gt;
&lt;p&gt;Cydia 包管理，可以用 tweak 安装插件&lt;/p&gt;
&lt;p&gt;dpkg 包管理工具进行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dpkg -i package.deb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;来安装插件&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://demoyao100.github.io/ios%E7%A0%B8%E5%A3%B3/</guid>
            <title>ios砸壳</title>
            <link>https://demoyao100.github.io/ios%E7%A0%B8%E5%A3%B3/</link>
            <category>re</category>
            <category>ios</category>
            <pubDate>Sun, 12 May 2024 15:04:01 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;PREFACE：初探&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h3 id=&#34;一-frida-ios-dump-master&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#一-frida-ios-dump-master&#34;&gt;#&lt;/a&gt; 一、frida-ios-dump-master&lt;/h3&gt;
&lt;p&gt;越狱后 Cydia 查询 frida-server 版本（github 上没有必须这里下载），对照&lt;a href=&#34;https://github.com/frida/frida/releases?page=5%E5%AE%89%E8%A3%85frida&#34;&gt; https://github.com/frida/frida/releases?page=5 安装 frida&lt;/a&gt; frida-tools 版本&lt;/p&gt;
&lt;p&gt;frida-ios-dump-master 砸壳：&lt;a href=&#34;https://juejin.cn/post/6844903893504098317&#34;&gt;https://juejin.cn/post/6844903893504098317&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://xhs-doc.xhscdn.com/10400250312lb8ufn3004ovqb9o?imageView2/2/w/1600&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;砸壳成功：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://xhs-doc.xhscdn.com/10400250312lbbofl30032uglng?imageView2/2/w/1600&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;核心二进制文件：&lt;/p&gt;
&lt;p&gt;入口（右）：Aweme ； 核心（左）：AwemeCore&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://xhs-doc.xhscdn.com/10400250312lch9l6300e68f808?imageView2/2/w/1600&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
